# Production-ready Helm values.yaml for Istio 1.26.6
global:
  hub: docker.io/istio
  tag: 1.26.6
  istioNamespace: istio-system
  
  proxy:
    image: proxyv2
    autoInject: enabled
    resources:
      limits:
        cpu: 500m
        memory: 500Mi
      requests:
        cpu: 200m
        memory: 300Mi
  
  defaultPodDisruptionBudget:
    enabled: true

base:
  enabled: true
  profile: demo

meshConfig:
  enableProtocolSniffingInbound: true
  enableProtocolSniffingOutbound: true
  outboundTrafficPolicy:
    mode: REGISTRY_ONLY
  
  defaultConfig:
    concurrency: 0
    holdApplicationUntilProxyStarts: true
    proxyMetadata:
      ISTIO_META_DNS_AUTO_ALLOCATE: "true"

pilot:
  enabled: true
  autoscaleEnabled: false
  replicaCount: 3
  
  resources:
    limits:
      cpu: 500m
      memory: 500Mi
    requests:
      cpu: 300m
      memory: 300Mi
  
  env:
    PILOT_ENABLE_CONFIG_DISTRIBUTION_TRACKING: "true"
    PILOT_ENABLE_XDS_CACHE: "true"
    PILOT_PUSH_THROTTLE: "500ms"

# CNI DISABLED - This will remove the istio-system pod
cni:
  enabled: false

# Ingress Gateway
ingressGateways:
  - name: istio-ingressgateway
    enabled: true
    autoscaleEnabled: false
    
    k8s:
      replicaCount: 3
      resources:
        requests:
          cpu: 200m
          memory: 200Mi
        limits:
          cpu: 500m
          memory: 500Mi
      service:
        type: NodePort

# Egress Gateway
egressGateways:
  - name: istio-egressgateway
    enabled: false
    
    k8s:
      replicaCount: 1
      resources:
        requests:
          cpu: 200m
          memory: 200Mi
        limits:
          cpu: 500m
          memory: 500Mi
      service:
        type: ClusterIP

# Telemetry and observability - all disabled
telemetry:
  enabled: false

prometheus:
  enabled: false

grafana:
  enabled: false

kiali:
  enabled: false

tracing:
  enabled: false